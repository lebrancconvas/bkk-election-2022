import { onMount, createSignal, Component, Show } from 'solid-js';
import { noShadowDOM } from 'component-register';

export interface SharerProps {
  url?: string;
  hideLabel?: boolean;
}

export const sharerDefaultProps = {
  url: null,
  hideLabel: false,
};

const Sharer: Component<SharerProps> = (props) => {
  noShadowDOM();

  const [encodedURL, setEncodedURL] = createSignal('');

  onMount(() => {
    setEncodedURL(encodeURI(props.url || window.location.href));
  });

  return (
    <div class="ui-flex ui-flex-row ui-space-x-2 ui-items-center">
      <Show when={!props.hideLabel}>
        <span class="typo-b5 ui-text-white">SHARE</span>
      </Show>

      <button
        aria-label="Copy link to clipboard"
        onClick={() => window.navigator.clipboard.writeText(encodedURL())}
      >
        <svg width="29" height="28" viewBox="0 0 29 28" fill="none">
          <g clip-path="url(#clip0_1352_755)">
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M17.19 10.2602C17.5057 10.2602 17.8083 10.1349 18.0315 9.91169C18.2547 9.68853 18.38 9.38584 18.38 9.07024C18.3801 8.91443 18.3492 8.76017 18.2893 8.61635C18.2293 8.47253 18.1415 8.342 18.0309 8.2323C17.9203 8.12259 17.789 8.03588 17.6447 7.97717C17.5003 7.91846 17.3458 7.88892 17.19 7.89024C16.8771 7.89024 16.577 8.01456 16.3557 8.23585C16.1344 8.45714 16.0101 8.75728 16.0101 9.07024C16.0087 9.22604 16.0383 9.38056 16.097 9.52488C16.1557 9.6692 16.2424 9.80046 16.3521 9.9111C16.4618 10.0217 16.5923 10.1095 16.7362 10.1695C16.88 10.2294 17.0342 10.2602 17.19 10.2602Z"
              fill="white"
            />
            <path
              d="M9.52997 15.1902C10.1872 15.1902 10.72 14.6575 10.72 14.0002C10.72 13.343 10.1872 12.8102 9.52997 12.8102C8.87275 12.8102 8.33997 13.343 8.33997 14.0002C8.33997 14.6575 8.87275 15.1902 9.52997 15.1902Z"
              fill="white"
            />
            <path
              d="M17.19 20.1103C17.8472 20.1103 18.38 19.5775 18.38 18.9203C18.38 18.263 17.8472 17.7303 17.19 17.7303C16.5328 17.7303 16 18.263 16 18.9203C16 19.5775 16.5328 20.1103 17.19 20.1103Z"
              fill="white"
            />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M14.5 0.000244141C10.787 0.000244141 7.226 1.47524 4.60049 4.10075C1.97499 6.72626 0.5 10.2872 0.5 14.0002C0.5 17.7133 1.97499 21.2742 4.60049 23.8997C7.226 26.5252 10.787 28.0002 14.5 28.0002C18.213 28.0002 21.774 26.5252 24.3995 23.8997C27.025 21.2742 28.5 17.7133 28.5 14.0002C28.5 10.2872 27.025 6.72626 24.3995 4.10075C21.774 1.47524 18.213 0.000244141 14.5 0.000244141ZM12.73 14.0002C12.7254 14.2678 12.685 14.5334 12.61 14.7902L15.2 16.4502C15.7647 15.9887 16.4706 15.7345 17.2 15.7302C18.046 15.7302 18.8574 16.0663 19.4557 16.6646C20.0539 17.2628 20.39 18.0742 20.39 18.9202C20.39 19.7663 20.0539 20.5777 19.4557 21.1759C18.8574 21.7742 18.046 22.1102 17.2 22.1102C16.3557 22.1076 15.5469 21.7703 14.9508 21.1724C14.3547 20.5744 14.02 19.7646 14.02 18.9202C14.0201 18.6531 14.0571 18.3873 14.13 18.1302L11.54 16.4602C10.9777 16.9262 10.2703 17.1809 9.54001 17.1802C8.6957 17.1802 7.8858 16.8455 7.28784 16.2495C6.68989 15.6534 6.35265 14.8446 6.35001 14.0002C6.35001 13.1542 6.68609 12.3428 7.28433 11.7446C7.88257 11.1463 8.69397 10.8102 9.54001 10.8102C10.2703 10.8096 10.9777 11.0643 11.54 11.5302L14.12 9.86024C14.0471 9.60324 14.0101 9.33739 14.01 9.07024C14.0126 8.22767 14.3485 7.42035 14.9443 6.82456C15.5401 6.22876 16.3474 5.89288 17.19 5.89025C18.0343 5.89024 18.8442 6.22496 19.4421 6.82104C20.0401 7.41712 20.3774 8.22594 20.38 9.07024C20.38 9.91628 20.0439 10.7277 19.4457 11.3259C18.8474 11.9242 18.036 12.2602 17.19 12.2602C16.4598 12.2609 15.7523 12.0062 15.19 11.5402L12.6 13.2102C12.6797 13.4663 12.7234 13.7322 12.73 14.0002Z"
              fill="white"
            />
          </g>
          <defs>
            <clipPath id="clip0_1352_755">
              <rect
                width="28"
                height="28"
                fill="white"
                transform="translate(0.5 0.000244141)"
              />
            </clipPath>
          </defs>
        </svg>
      </button>

      <a
        href={`http://www.facebook.com/sharer/sharer.php?u=${encodedURL()}`}
        target="_blank"
        rel="noreferrer noopener"
        aria-label="Share to Facebook"
      >
        <svg width="28" height="28" fill="white" viewBox="0 0 30 30">
          <path d="M15 0C6.75 0 0 6.75 0 15C0 23.25 6.75 30 15 30C23.25 30 30 23.25 30 15C30 6.75 23.25 0 15 0ZM18.975 9.15C18.45 9.15 18 9.15 17.475 9.15C16.8 9.15 16.425 9.525 16.35 10.125C16.35 10.65 16.35 11.175 16.35 11.7C16.35 11.925 16.425 11.85 16.575 11.85C17.325 11.85 18.075 11.85 18.825 11.85C19.05 11.85 19.125 11.925 19.125 12.15C19.05 13.05 18.975 13.875 18.9 14.775C18.9 15 18.825 15 18.6 15C18 15 17.4 15 16.8 15C16.35 15 16.425 14.925 16.425 15.375C16.425 18.15 16.425 20.85 16.425 23.625C16.425 23.925 16.35 24 16.05 24C15 24 14.025 24 12.975 24C12.675 24 12.675 23.925 12.675 23.625C12.675 22.275 12.675 20.85 12.675 19.5C12.675 18.075 12.675 16.725 12.675 15.3C12.675 15.075 12.6 15 12.375 15C11.925 15 11.475 15 11.025 15C10.875 15 10.8 14.925 10.8 14.775C10.8 13.875 10.8 13.05 10.8 12.15C10.8 12 10.875 11.925 11.025 11.925C11.475 11.925 11.925 11.925 12.375 11.925C12.6 11.925 12.675 11.85 12.675 11.625C12.675 10.95 12.675 10.275 12.675 9.6C12.675 8.775 12.9 8.025 13.425 7.35C14.025 6.525 14.925 6.15 15.9 6.075C16.95 6 18 6.075 18.975 6.075C19.125 6.075 19.125 6.15 19.125 6.3C19.125 7.2 19.125 8.1 19.125 8.925C19.2 9.075 19.125 9.15 18.975 9.15Z" />
        </svg>
      </a>

      <a
        href={`https://twitter.com/intent/tweet?url=${encodedURL()}`}
        target="_blank"
        rel="noreferrer noopener"
        aria-label="Share to Twitter"
      >
        <svg width="28" height="28" fill="white" viewBox="0 0 30 30">
          <path d="M15 0C6.75 0 0 6.75 0 15C0 23.25 6.75 30 15 30C23.25 30 30 23.25 30 15C30 6.75 23.25 0 15 0ZM22.2 11.325C22.2 11.475 22.2 11.625 22.2 11.775C22.2 16.65 18.45 22.35 11.625 22.35C9.525 22.35 7.575 21.75 5.925 20.7C6.225 20.7 6.525 20.775 6.825 20.775C8.55 20.775 10.125 20.175 11.4 19.2C9.75 19.2 8.4 18.075 7.95 16.65C8.175 16.725 8.4 16.725 8.625 16.725C9 16.725 9.3 16.65 9.6 16.575C7.875 16.2 6.6 14.7 6.6 12.975C6.6 12.975 6.6 12.975 6.6 12.9C7.125 13.2 7.65 13.35 8.25 13.35C7.35 12.6 6.75 11.475 6.75 10.2C6.75 9.525 6.9 8.85 7.275 8.325C9.075 10.575 11.85 12.075 14.925 12.225C14.85 11.925 14.85 11.7 14.85 11.4C14.85 9.375 16.5 7.725 18.525 7.725C19.575 7.725 20.55 8.175 21.225 8.925C22.05 8.775 22.875 8.475 23.55 8.025C23.25 8.925 22.65 9.6 21.9 10.05C22.65 9.975 23.4 9.75 24 9.45C23.55 10.125 22.875 10.8 22.2 11.325Z" />
        </svg>
      </a>

      <a
        href={`https://social-plugins.line.me/lineit/share?url=${encodedURL()}`}
        target="_blank"
        rel="noreferrer noopener"
        aria-label="Share to Line"
      >
        <svg width="28" height="28" fill="white" viewBox="0 0 30 30">
          <path d="M12.75 11.4751C12.525 11.4751 12.3 11.7001 12.3 11.9251V15.3001C12.3 15.5251 12.525 15.7501 12.75 15.7501C12.975 15.7501 13.2 15.5251 13.2 15.3001V11.9251C13.2 11.7001 12.975 11.4751 12.75 11.4751Z" />
          <path d="M16.725 11.4751C16.5 11.4751 16.275 11.7001 16.275 11.9251V13.9501L14.7 11.7751C14.625 11.6251 14.4 11.5501 14.175 11.6251C14.025 11.7001 13.875 11.8501 13.875 12.0751V15.3751C13.875 15.6001 14.1 15.8251 14.325 15.8251C14.55 15.8251 14.775 15.6001 14.775 15.3751V13.4251L16.35 15.6001C16.425 15.7501 16.575 15.7501 16.725 15.7501C16.8 15.7501 16.8 15.7501 16.875 15.7501C17.025 15.6751 17.175 15.5251 17.175 15.3001V11.9251C17.1 11.7001 16.95 11.4751 16.725 11.4751Z" />
          <path d="M11.475 14.8501H10.275V11.9251C10.275 11.7001 10.05 11.4751 9.825 11.4751C9.6 11.4751 9.375 11.7001 9.375 11.9251V15.3001C9.375 15.5251 9.6 15.7501 9.825 15.7501H11.4C11.625 15.7501 11.85 15.5251 11.85 15.3001C11.85 15.0751 11.775 14.8501 11.475 14.8501Z" />
          <path d="M20.325 14.775H18.6V13.95H19.95C20.175 13.95 20.4 13.725 20.4 13.5C20.4 13.275 20.175 13.05 19.95 13.05H18.6V12.225H20.25C20.475 12.225 20.7 12 20.7 11.775C20.7 11.55 20.475 11.325 20.25 11.325H18.15C17.925 11.325 17.7 11.55 17.7 11.775V13.425V15.075C17.7 15.3 17.925 15.525 18.15 15.525H20.325C20.55 15.525 20.775 15.3 20.775 15.075C20.775 14.85 20.55 14.775 20.325 14.775Z" />
          <path d="M15 0C6.75 0 0 6.75 0 15C0 23.25 6.75 30 15 30C23.25 30 30 23.25 30 15C30 6.75 23.25 0 15 0ZM22.725 18.225C21.525 19.725 16.275 23.25 15.075 24C14.55 24.3 13.95 23.925 13.95 23.325V21.525C11.025 21.375 5.775 18.825 5.775 13.725C5.775 8.475 11.025 5.925 15.075 5.925C19.425 5.925 24.375 8.775 24.375 13.725C24.3 15.075 23.925 16.725 22.725 18.225Z" />
        </svg>
      </a>
    </div>
  );
};

export default Sharer;
