(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{483:function(t,e,n){var content=n(502);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(44).default)("60756d06",content,!0,{sourceMap:!1})},500:function(t,e,n){t.exports=n.p+"img/Vector.3b4c3b5.png"},501:function(t,e,n){"use strict";n(483)},502:function(t,e,n){var r=n(43)((function(i){return i[1]}));r.push([t.i,".line-chart-race[data-v-229bfc40]{width:100%;height:100%;position:relative}.tooltip-wrapper[data-v-229bfc40]{position:absolute;top:50%;transform:translateY(-50%);z-index:10;transition:all .2s;pointer-events:none}.tooltip-wrapper .tooltip[data-v-229bfc40]{background:rgba(0,0,0,.8);border:1px solid hsla(0,0%,100%,.2);border-radius:5px;color:#fff;padding:18px;min-width:170px}.tooltip-wrapper .tooltip .title[data-v-229bfc40]{font-weight:700}.tooltip-wrapper .tooltip .data-list[data-v-229bfc40]{width:100%;display:flex;align-items:center;justify-content:space-between;margin-top:10px}svg[data-v-229bfc40]{width:100%;height:100%}text[data-v-229bfc40]{font-family:Prompt}.line-group[data-v-229bfc40]{transition:all .3s}.line-group.not-active[data-v-229bfc40]{opacity:.1}.checks[data-v-229bfc40]{cursor:pointer}.legend-wrapper[data-v-229bfc40]{margin-top:14px}.legend-wrapper .legend[data-v-229bfc40]{max-height:260px;display:flex;justify-content:center;align-items:center;flex-direction:column;flex-wrap:wrap;margin:0 -8px}.legend-wrapper .legend-group.not-active[data-v-229bfc40]{opacity:.3}.legend-wrapper .legend-group[data-v-229bfc40]{min-width:270px;cursor:default;padding:5px 8px;transition:all .3s}.legend-wrapper .legend-group>span[data-v-229bfc40]{max-width:100%;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;display:flex}.legend-wrapper .legend-group .circle[data-v-229bfc40]{flex:0 0 auto;width:25px;height:25px;border-radius:20px}.legend-wrapper .legend-group .label[data-v-229bfc40]{flex:1;padding:0 0 0 8px}.fade-enter-active[data-v-229bfc40],.fade-leave-active[data-v-229bfc40]{transition:opacity .2s}.fade-enter[data-v-229bfc40],.fade-leave-to[data-v-229bfc40]{opacity:0}",""]),r.locals={},t.exports=r},504:function(t,e,n){"use strict";n.r(e);n(26),n(56),n(57);var r=n(4),c=n(20),o=(n(58),n(32),n(42),n(518),n(31),n(519),n(339)),l=n.n(o),d=n(503),h=n(0),f=n.n(h);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var y={props:{data_set:{type:Array,default:function(){return[]}},animate:{type:Boolean,default:!1},active_chart:{type:null,default:""},type:{type:String,default:"engagement"}},data:function(){return{width:1e3,height:520,step:8,left_tooltip:0,hover:"",active:"",active_date:"",old_active_date:2020,candidates:[],animate_finish:!1,animate_start:!1}},computed:{duration:function(){return"desktop"!==this.$mq?7500:12500},margin:function(){return{top:30,left:24,right:24,bottom:30}},formatkilo:function(){return d.c("~s")},formatThousands:function(){return d.c(",")},candidate_group:function(){var t=l.a.groupBy(this.data_set,"candidate");return Object.keys(t)},color:function(){return d.h().domain(this.candidate_group).range(["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"])},yAxis_group:function(){var t=l.a.groupBy(this.data_set,"date");return Object.keys(t).map((function(t){return new Date(t)}))},check_width:function(){var t=this.yAxis_group.length;return(this.width-this.margin.left-this.margin.right)/(t-1)},line:function(){var t=this;return d.d().x((function(e){return t.xScale(e.date)})).y((function(e){return t.yScale(e.value)}))},yScale:function(){var t="engagement"===this.type?[0,this.maximum]:[this.maximum,1];return d.g().domain(t).range([this.height-this.margin.bottom,this.margin.top])},xScale:function(){return d.i().domain(d.b(this.data_set,(function(t){return t.date}))).range([this.margin.left,this.width-this.margin.right])},transitionPath:function(){return d.l().ease(d.a).duration(this.duration)},maximum:function(){var t=d.e(this.yAxisTick),e=d.e(this.data_set,(function(t){return t.value}));return t>e?t:e},yAxisTick:function(){var t="engagement"===this.type?6:this.yAxis_group.length;return d.g().domain([0,d.e(this.data_set,(function(t){return t.value}))]).nice().ticks(t)},ready:function(){return this.animate&&0!==this.candidates},active_data:function(){var t=this,e=this.hover||this.active,n=[],r="engagement"===this.type?"desc":"asc";return this.candidates.forEach((function(r){var c=l.a.get(r,"data",[]).find((function(n){return t.isDateSame(n.date,e)}));if(c){var o=l.a.pick(c,["candidate","value"]);n.push(m(m({},o),{},{color:r.color,value_str:t.formatkilo(o.value)}))}})),{date:this.dateDisplay(e),candidates:l.a.orderBy(n,"value",r)}}},watch:{hover:{handler:function(){this.leftTooltip()},immediate:!0},ready:{handler:function(t){this.animateStart()},immediate:!0},animate_finish:function(t){t&&!this.animate_start&&(this.animate_start=!0)},active_chart:function(t){this.onClickChecks(t)}},beforeMount:function(){window.addEventListener("resize",this.resizeHandler)},destroyed:function(){window.removeEventListener("resize",this.resizeHandler)},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,c,o,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.resizeHandler(),e.next=3,t.setDataGroupMenu();case 3:n=d.k(".line-path").data(t.candidates),r=d.k(".line-group").data(t.candidates),c=d.k(".labels-group").data(t.candidates),d.k(".legend-group").data(t.candidates),r.on("mouseover",(function(t){d.j(this).raise()})),n.selectAll(".line").each((function(){var select=d.j(this),t=select.node().getTotalLength();select.attr("stroke-dashoffset",t).attr("stroke-dasharray",t)})),o=t.xScale,h=t.yScale,c.each((function(t){d.j(this).attr("transform","translate(".concat(o(l.a.get(t,"data[0].date")),",").concat(h(l.a.get(t,"data[0].value")),")"))})),t.animateStart();case 14:case"end":return e.stop()}}),e)})))()},methods:{resizeHandler:function(){this.width=this.$refs.container.clientWidth,this.height=this.$refs.container.clientHeight},animateStart:function(){this.setAnimatePathLabel(),this.setAnimatePathLine()},dateDisplay:function(t){return f()(t).add(543,"years").format("DD MMM YY")},dateFormat:function(t){return f()(t).format("yyyy-MM-DD")},handleActiveLegend:function(t){l.a.isEqual(this.active,t)?this.active="":this.active=t},leftTooltip:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,c,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=30+t.margin.left,r=t.hover||t.active,c=t.xScale("engagement"===t.type?new Date(r):r)-n,e.next=5,t.$nextTick();case 5:if(o=t.$refs.tooltip){e.next=8;break}return e.abrupt("return");case 8:l=o.clientWidth,c=c-l<-20?n:c-l+t.margin.left,t.left_tooltip=c;case 11:case"end":return e.stop()}}),e)})))()},circleSize:function(t){var e=d.e(this.data_set,(function(t){return t.value})),n="mobile"===this.$mq?26:40,r="mobile"===this.$mq?13:20;return t===e?n/2:r/2},setAnimatePathLine:function(){var t=this;d.k(".line-path").selectAll(".line").each((function(){d.j(this).transition(t.transitionPath).delay(100).attr("stroke-dashoffset",0)}))},isDateSame:function(t,e){return f()(t).isSame(new Date(e))},setAnimatePathLabel:function(){var t=this,e=d.k(".labels-group");this.animate_finish=!1,e.call((function(){e.each((function(g,i){var e=this;d.j(this).call((function(){var n=0,data=g.data,r=(data=l.a.chain(g.data).filter((function(e){return t.handleCondition(e)})).orderBy("date",t.old_active_date>t.active_date&&t.active_date?"desc":"asc").value()).length;!function animate(){var c=l.a.get(data,"[".concat(n,"]"),{}),time=t.active_date&&t.old_active_date>t.active_date?c.timeBk:c.time;d.j(e).transition().duration(time).ease(d.a).attr("transform","translate(".concat(t.xScale(c.date),",").concat(t.yScale(c.value),")")).on("end",(function(){n<r?animate():t.animate_finish=!0})),n++}()}))}))}))},handleHover:function(t){d.j(t).moveToFront()},min:function(data){return d.f(data,(function(t){return t.value}))},calDistance:function(data,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"forward",n="forward"===e?-1:1,r=l.a.get(data,"[".concat(t+n,"]"),{}),c=l.a.get(data,"[".concat(t,"]"),{});if(l.a.isEmpty(r))return 0;var o=this.xScale(r.date)-this.xScale(c.date),d=this.yScale(r.value)-this.yScale(c.value);return Math.hypot(o,d)||0},setDataGroupMenu:function(){var t=this,e=function(data){var e=data.map((function(e,n){var r=t.calDistance(data,n,"forward"),c=t.calDistance(data,n,"black");return m(m({},e),{},{distance:r,distanceBk:c})})),n=e.reduce((function(t,e){return t+e.distance}),0);return e.map((function(e){var time=t.duration*e.distance/n,r=t.duration*e.distanceBk/n;return m(m({},e),{},{time:time,timeBk:r,pathLength:n})}))},n=[],r=l.a.groupBy(this.data_set,"candidate");for(var c in r){var o=l.a.get(r,c,[]),data={candidate:c,min:d.f(o,(function(t){return t.value})),max:d.e(o,(function(t){return t.value})),color:this.color(c),data:e(o)};n.push(data)}this.candidates=n,console.log(n)},checksEvent:l.a.throttle((function(t){"engagement"===this.type?this.hover=this.dateFormat(t):this.hover=t}),150),sumRangeTimeData:function(){var t=this,data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return data.filter((function(e){return t.handleCondition(e)})).reduce((function(e,n){return e+(t.old_active_date>t.active_date?n.timeBk:n.time)}),0)},handleCondition:function(t){var e=!0;return this.active_date&&this.old_active_date<this.active_date&&(e=this.active_date>=t.date&&t.date>this.old_active_date),this.active_date&&this.old_active_date>this.active_date&&(e=this.active_date<=t.date&&t.date<this.old_active_date),e},onClickChecks:function(t){var e=this;this.active=t,this.$emit("change",this.active_data),this.$emit("update:active_chart",t),d.k(".labels-group").data(this.candidates).transition().duration(600).attr("transform",(function(n){var r=n.data.find((function(n){return e.dateFormat(n.date)===e.dateFormat(t)}))||{};return"translate(".concat(e.xScale(r.date),",").concat(e.yScale(r.value),")")}))}}},_=y,x=(n(501),n(50)),component=Object(x.a)(_,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"line-chart-race"},[r("transition",{attrs:{name:"fade"}},[t.hover||t.active?r("div",{ref:"tooltip",staticClass:"tooltip-wrapper",style:"left: "+t.left_tooltip+"px"},[r("div",{staticClass:"tooltip typo-b5"},[r("div",{staticClass:"title"},[t._v(t._s(t.active_data.date))]),t._v(" "),t._l(t.active_data.candidates,(function(e,n){return r("div",{key:n,staticClass:"data-list"},[r("div",{staticClass:"name pr-4"},[t._v(t._s(e.candidate))]),t._v(" "),r("div",{staticClass:"value",style:"color: "+e.color},[t._v("\n            "+t._s(e.value_str)+"\n          ")])])}))],2)]):t._e()]),t._v(" "),r("svg",{ref:"container"},[t._l(t.yAxis_group,(function(e,n){return r("g",{key:n,staticClass:"checks",attrs:{transform:"translate("+(t.xScale(e)-t.check_width/2)+", 0)"}},[r("g",{style:{opacity:t.dateFormat(t.hover)===t.dateFormat(e)||t.dateFormat(t.active)===t.dateFormat(e)&&!t.hover?1:0}},[r("line",{staticStyle:{transition:"'all 0.2s'"},attrs:{x1:t.check_width/2,x2:t.check_width/2,y1:t.margin.top,y2:t.height-t.margin.bottom,stroke:"#e0e1e1"}})])])})),t._v(" "),r("g",{staticClass:"x-tick"},t._l(t.yAxis_group,(function(e,n){return r("g",{directives:[{name:"show",rawName:"v-show",value:"engagement"!==t.type||(0==n||n==t.yAxis_group.length-1),expression:"\n          type === 'engagement'\n            ? index == 0 || index == yAxis_group.length - 1\n            : true\n        "}],key:n,attrs:{transform:"translate("+t.xScale(e)+", 0)","font-size":"mobile"===t.$mq?10:13,fill:"#5a5033"}},[r("text",{attrs:{y:t.height-10,"text-anchor":0===n?"start":n===t.yAxis_group.length-1?"end":"middle"}},[t._v("\n          "+t._s(t.dateDisplay(e))+"\n        ")])])})),0),t._v(" "),r("g",{staticClass:"y-tick"},t._l(t.yAxisTick,(function(e,n){return r("text",{key:""+e+n,attrs:{x:20,y:t.yScale(e),"dominant-baseline":"middle","text-anchor":"end","font-size":"mobile"===t.$mq?10:13,fill:"#5a5033"}},[0!==e?r("tspan",[t._v("\n          "+t._s(t.formatThousands(e))+"\n        ")]):t._e()])})),0),t._v(" "),r("g",{staticClass:"y-axis-line"},t._l(t.yAxisTick,(function(e,n){return r("line",{key:""+e+n,attrs:{x1:t.margin.left,y1:t.yScale(e),x2:t.width-t.margin.right,y2:t.yScale(e),stroke:"#DADCE0"}})})),0),t._v(" "),r("g",{staticClass:"g-lines"},t._l(t.candidates,(function(e){return r("g",{key:e.menu,class:["line-group",{"not-active":t.active.menu&&t.active.menu!==e.menu}],on:{click:function(n){return t.handleActiveLegend(e)},mouseleave:function(e){t.active=""}}},[r("g",[r("circle",{attrs:{fill:e.color,cx:t.margin.left,cy:t.yScale(e.data[0].value),r:"4"}}),t._v(" "),t._l(e.data,(function(n,c){return r("circle",{key:c,style:"opacity: "+(t.dateFormat(t.hover)===t.dateFormat(n.date)||c===e.data.length-1&&t.animate_start?"1":"0"),attrs:{fill:e.color,cx:t.xScale(n.date),cy:t.yScale(n.value),r:"4"}})})),t._v(" "),r("g",{staticClass:"line-path"},[r("path",{staticClass:"line",attrs:{d:t.line(e.data),fill:"none",stroke:e.color,"stroke-linejoin":"round","stroke-linecap":"round","stroke-width":"4"}})])],2),t._v(" "),r("g",{staticClass:"labels-group",attrs:{id:e.menu}},[r("g",{staticClass:"end-circle-container"},[r("circle",{staticClass:"circle bg",attrs:{fill:e.color,r:"4"}}),t._v(" "),r("circle",{staticClass:"circle bg",attrs:{r:t.circleSize(e.max),fill:e.color}}),t._v(" "),r("image",{attrs:{href:n(500),height:2*t.circleSize(e.max)-4,width:2*t.circleSize(e.max)-4,x:-1*t.circleSize(e.max)+2,y:-1*t.circleSize(e.max)+2}})])])])})),0),t._v(" "),r("g",{staticClass:"checks-group",on:{mouseleave:function(e){t.hover=""}}},t._l(t.yAxis_group,(function(e,n){return r("g",{key:n,staticClass:"checks",attrs:{transform:"translate("+(t.xScale(e)-t.check_width/2)+", 0)"},on:{click:function(n){t.animate_finish&&"engagement"===t.type&&t.onClickChecks(e)},mouseover:function(n){return t.checksEvent(e)}}},[r("rect",{staticClass:"check-rect",staticStyle:{"pointer-events":"all"},attrs:{x:0,y:t.margin.top,height:t.height-t.margin.bottom,fill:"none",width:t.check_width}})])})),0)],2)],1)}),[],!1,null,"229bfc40",null);e.default=component.exports}}]);